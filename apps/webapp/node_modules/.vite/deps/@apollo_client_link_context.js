import {
  ApolloLink,
  Observable,
  init_core,
  init_utilities
} from "./chunk-Y7JMPM3I.js";
import "./chunk-3DKP5NJE.js";
import {
  __rest,
  init_tslib_es6
} from "./chunk-SLCLQLWM.js";
import "./chunk-2LSFTFF7.js";

// ../../node_modules/.pnpm/@apollo+client@3.9.11_@types+react@18.2.79_graphql@15.8.0_react-dom@18.2.0_react@18.2.0/node_modules/@apollo/client/link/context/index.js
init_tslib_es6();
init_core();
init_utilities();
function setContext(setter) {
  return new ApolloLink(function(operation, forward) {
    var request = __rest(operation, []);
    return new Observable(function(observer) {
      var handle;
      var closed = false;
      Promise.resolve(request).then(function(req) {
        return setter(req, operation.getContext());
      }).then(operation.setContext).then(function() {
        if (closed)
          return;
        handle = forward(operation).subscribe({
          next: observer.next.bind(observer),
          error: observer.error.bind(observer),
          complete: observer.complete.bind(observer)
        });
      }).catch(observer.error.bind(observer));
      return function() {
        closed = true;
        if (handle)
          handle.unsubscribe();
      };
    });
  });
}
export {
  setContext
};
//# sourceMappingURL=@apollo_client_link_context.js.map
